{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mrdre\\\\Desktop\\\\CashCoach\\\\CashCoach\\\\client\\\\cash\\\\src\\\\components\\\\elements\\\\list\\\\updateList\\\\UpdateList.tsx\",\n  _s = $RefreshSig$();\nimport edit from '../../../../icons/edit.svg';\nimport deleteIcon from '../../../../icons/delete.svg';\nimport { useContext, useEffect, useState } from \"react\";\nimport { Context } from \"../../../..\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdateList = (_ref, _ref2) => {\n  _s();\n  var _document$querySelect;\n  let {\n    searchQuery,\n    sortColumn,\n    sortDirection\n  } = _ref;\n  let {\n    id\n  } = _ref2;\n  const [items, setItems] = useState([]);\n  const {\n    store\n  } = useContext(Context);\n  const [bool, setBool] = useState(false);\n  const getId = id => {\n    id(id);\n  };\n  const changeBool = () => {\n    setBool(bool => !bool);\n  };\n  (_document$querySelect = document.querySelectorAll('.adding__btn')) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.forEach(element => {\n    element.addEventListener('click', () => {\n      changeBool();\n    });\n  });\n  useEffect(() => {\n    async function fetchData() {\n      const res = await store.generate_list();\n      setItems(res);\n    }\n    fetchData();\n  }, [bool, store]);\n  const filteredItems = items.filter(item => item.description.toLowerCase().includes(searchQuery.toLowerCase()) || item.value.includes(searchQuery) || item.date.includes(searchQuery));\n  const sortedItems = sortColumn && sortDirection ? filteredItems.sort((a, b) => {\n    let aValue = a.bool ? a.value : -a.value;\n    let bValue = b.bool ? b.value : -b.value;\n    if (sortColumn === \"amount\") {\n      return sortDirection === \"asc\" ? aValue - bValue : bValue - aValue;\n    } else if (sortColumn === \"date\") {\n      return sortDirection === \"asc\" ? new Date(a.timeAdded).getTime() - new Date(b.timeAdded).getTime() : new Date(b.timeAdded).getTime() - new Date(a.timeAdded).getTime();\n    } else {\n      return 0;\n    }\n  }) : filteredItems;\n\n  // Копіювання по кліку\n  const [tooltipText, setTooltipText] = useState('Клацніть, щоб скопіювати');\n  const handleCopyAmount = event => {\n    const cell = event.target;\n    const amount = cell.textContent;\n    if (amount) {\n      navigator.clipboard.writeText(amount);\n      setTooltipText('Текст успішно скопійовано');\n      setTimeout(() => {\n        setTooltipText('Клацніть, щоб скопіювати');\n      }, 2000);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: sortedItems.map(element => /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _document$querySelect2;\n            (_document$querySelect2 = document.querySelector('.edit-form')) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.classList.remove('none');\n            getId(String(element._id));\n          },\n          className: \"edit\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: edit,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 143\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: element.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        style: {\n          color: element.bool ? '#27AE60' : '#FC4C4F'\n        },\n        \"data-tooltip\": tooltipText,\n        onClick: handleCopyAmount,\n        children: element.value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: element.date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            store.delete(String(element._id));\n            setTimeout(changeBool, 100);\n          },\n          className: \"delete\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: deleteIcon,\n            alt: \"Delete icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 27\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }, this)]\n    }, String(element._id), true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 3\n  }, this);\n};\n_s(UpdateList, \"3enXe0CryMHq4l4sTYXP9S84VHo=\");\n_c = UpdateList;\nexport default UpdateList;\nvar _c;\n$RefreshReg$(_c, \"UpdateList\");","map":{"version":3,"names":["edit","deleteIcon","useContext","useEffect","useState","Context","jsxDEV","_jsxDEV","UpdateList","_ref","_ref2","_s","_document$querySelect","searchQuery","sortColumn","sortDirection","id","items","setItems","store","bool","setBool","getId","changeBool","document","querySelectorAll","forEach","element","addEventListener","fetchData","res","generate_list","filteredItems","filter","item","description","toLowerCase","includes","value","date","sortedItems","sort","a","b","aValue","bValue","Date","timeAdded","getTime","tooltipText","setTooltipText","handleCopyAmount","event","cell","target","amount","textContent","navigator","clipboard","writeText","setTimeout","children","map","onClick","_document$querySelect2","querySelector","classList","remove","String","_id","className","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","style","color","delete","_c","$RefreshReg$"],"sources":["C:/Users/mrdre/Desktop/CashCoach/CashCoach/client/cash/src/components/elements/list/updateList/UpdateList.tsx"],"sourcesContent":["import edit from '../../../../icons/edit.svg';\r\nimport deleteIcon from '../../../../icons/delete.svg';\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { Context } from \"../../../..\";\r\nimport { ListItem } from \"../../../../models/ListItem\";\r\n\r\ninterface UpdateListProps {\r\n\tsearchQuery: string;\r\n\tsortColumn: string;\r\n\tsortDirection: string;\r\n\tid: any;\r\n}\r\n  \r\nconst UpdateList = ({searchQuery, sortColumn, sortDirection }: UpdateListProps, {id}: any) => {\r\n\tconst [items, setItems] = useState<Array<ListItem>>([]);\r\n\tconst { store } = useContext(Context);\r\n\tconst [bool, setBool] = useState(false);\r\n\r\n\tconst getId = (id: any) => {\r\n\t\tid(id);\r\n\t}\r\n\r\n\tconst changeBool = () => {\r\n\t  setBool(bool => !bool);\r\n\t};\r\n\r\n\tdocument.querySelectorAll('.adding__btn')?.forEach((element) => {\r\n\t\telement.addEventListener('click', () => {\r\n\t\t\tchangeBool();\r\n\t\t})\r\n\t})\r\n  \r\n\tuseEffect(() => {\r\n\t  async function fetchData() {\r\n\t\tconst res = await store.generate_list();\r\n\t\tsetItems(res);\r\n\t  }\r\n\t  fetchData();\r\n\t}, [bool, store]);\r\n  \r\n\tconst filteredItems = items.filter((item) =>\r\n\t  item.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n\t  item.value.includes(searchQuery) ||\r\n\t  item.date.includes(searchQuery)\r\n\t);\r\n  \r\nconst sortedItems = sortColumn && sortDirection\r\n  ? filteredItems.sort((a:any, b:any) => {\r\n      let aValue = a.bool ? a.value : -a.value;\r\n      let bValue = b.bool ? b.value : -b.value;\r\n\r\n      if (sortColumn === \"amount\") {\r\n        return sortDirection === \"asc\" ? aValue - bValue : bValue - aValue;\r\n      } else if (sortColumn === \"date\") {\r\n        return sortDirection === \"asc\"\r\n          ? new Date(a.timeAdded).getTime() - new Date(b.timeAdded).getTime()\r\n          : new Date(b.timeAdded).getTime() - new Date(a.timeAdded).getTime();\r\n      } else {\r\n        return 0;\r\n      }\r\n    })\r\n  : filteredItems;\r\n\r\n\t// Копіювання по кліку\r\n\tconst [tooltipText, setTooltipText] = useState('Клацніть, щоб скопіювати');\r\n\r\n\tconst handleCopyAmount = (event: React.MouseEvent<HTMLTableCellElement>) => {\r\n\t\tconst cell = event.target as HTMLElement;\r\n\t\tconst amount = cell.textContent;\r\n\t\r\n\t\tif (amount) {\r\n\t\t\tnavigator.clipboard.writeText(amount);\r\n\t\t\tsetTooltipText('Текст успішно скопійовано');\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetTooltipText('Клацніть, щоб скопіювати');\r\n\t\t}, 2000);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<tbody>\r\n\t\t  {sortedItems.map((element) => (\r\n\t\t\t<tr key={String(element._id)}>\r\n\t\t\t\t<td><button onClick={() => {document.querySelector('.edit-form')?.classList.remove('none'); getId(String(element._id))}} className=\"edit\"><img src={edit} alt=\"\" /></button></td>\r\n\t\t\t\t<td>{element.description}</td>\r\n\t\t\t\t<td\r\n\t\t\t\t\t\tstyle={{color: element.bool ? '#27AE60' : '#FC4C4F'}}\r\n\t\t\t\t\t\tdata-tooltip={tooltipText}\r\n\t\t\t\t\t\tonClick={handleCopyAmount}\r\n\t\t\t\t\t>{element.value}</td>\r\n\t\t\t\t<td>{element.date}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<button onClick={() => {\r\n\t\t\t\t\t\t\tstore.delete(String(element._id));\r\n\t\t\t\t\t\t\tsetTimeout(changeBool, 100);\r\n\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\tclassName=\"delete\"><img src={deleteIcon} alt=\"Delete icon\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t  ))}\r\n\t\t</tbody>\r\n\t)\r\n}\r\n\r\nexport default UpdateList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}